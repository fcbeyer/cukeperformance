<h1>BVT Performance Charts</h1>
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
    <script type="text/javascript" src="http://www.google.com/jsapi"></script>
    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/datatables/1.9.4/jquery.dataTables.min.js"></script>
    
    <script type="text/javascript">
      google.load('visualization', '1', {packages: ['corechart']});
    </script>
    <script type="text/javascript">
	  var data = <%= @bvtData.to_json.html_safe %>;
      function drawVisualization() {
        // Create and populate the data table.
        var dataTable = new google.visualization.DataTable();
        dataTable.addColumn('string', 'Build Date');
        dataTable.addColumn('number', 'Duration');
        dataTable.addColumn({type:'string', role:'tooltip'});
        
        for(var i=0; i < data.length; i++) {
        	dataTable.addRow([data[i].build_date+"_"+data[i].build_time, data[i].duration, data[i].duration_converted]);
        }
      
        // Create and draw the visualization.
        new google.visualization.BarChart(document.getElementById('visualization')).
            draw(dataTable,
                 {title:"BVT Performance",
                  width:900, height:700,
                  vAxis: {title: "Build"},
                  hAxis: {title: "Duration in Nanoseconds", minValue: 200000000000}}
            );
      }
      

      google.setOnLoadCallback(drawVisualization);
    </script>
  </head>
  <body style="font-family: Arial;border: 0 none;">
    <div id="visualization" style="width: 900px; height: 700px;"></div>
  </body>
</html>

<table>
	<tr>
		<th colspan="5">Links to graphed BVT builds</th>
	</tr>
	<% @bvtBuilds.each do |bvt| %>
	<tr>
		<td style="padding-right: 5px"><%= link_to 'BVT build ' + bvt.getFullName(bvt.id).to_s, suite_path(bvt.id) %></td>
	</tr>
	<% end %>
</table>

<br />

<%= link_to 'Suite Index', suites_path %>
