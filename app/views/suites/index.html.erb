<h1>Listing suites</h1>

<!-- <script>
	var date = "2012-10-30"
	var time = "11-28-05"
	var myArray = time.split("-")
	for(var i=0; i<myArray.length; i++) { myArray[i] = parseInt(myArray[i], 10); }
	var rick = moment("2012-10-30").hours(myArray[0]).seconds(myArray[1]).milliseconds(myArray[2]).toDate();
	document.write(rick);
</script> -->

<ul class="nav nav-tabs">
  <% @suite_list.each_with_index do |suite,suite_num| %>
  	<% if suite_num == 0 %>
  		<li class="active"><a href="#<%= suite.name %>" data-toggle="tab"><%= suite.display_name %> Builds</a></li>
  	<% else %>
  		<li><a href="#<%= suite.name %>" data-toggle="tab"><%= suite.display_name %> Builds</a></li>
  	<% end %>
  <% end %>
</ul>

<div class="tab-content">
	<% @suite_list.each_with_index do |entry,entry_num| %>
		<% if entry_num == 0 %>
			<div class="tab-pane active" id="<%= entry.name %>">
		<% else %>
			<div class="tab-pane" id="<%= entry.name %>">
		<% end %>
			<table class="table table-bordered table-condensed table-hover" id="suiteTable<%= entry_num %>" >
				<thead>
				  <tr>
					<th>Build Timestamp <%= text_field_tag 'build_filter'+entry_num.to_s, nil, :onkeyup => "filterSuitesTable('#build_filter#{entry_num}','tr td.buildRunstamp#{entry_num}')" %> </th>
				    <th>Duration <%= text_field_tag 'duration_filter'+entry_num.to_s, nil, :onkeyup => "filterSuitesTable('#duration_filter#{entry_num}','tr td.buildDuration#{entry_num}')" %> </th>
				    <th>Build Tag <%= text_field_tag 'tag_filter'+entry_num.to_s, nil, :onkeyup => "filterSuitesTable('#tag_filter#{entry_num}','tr td.buildTag#{entry_num}')" %> </th></th>
				    <th>Status <%= select_tag 'status_filter'+entry_num.to_s, "<option>failed</option><option>passed</option>".html_safe, :prompt => "Choose a value...",:onchange => "filterSuitesTable('#status_filter#{entry_num}','tr td span.buildStatus#{entry_num}')" %> </th>
				    <th></th>
				    <th></th>
				  </tr>
				</thead>
			
			<% @suites[entry.name].each do |suite| %>
			  <tr>
			    <td class="buildRunstamp<%= entry_num %>"><%= suite.runstamp %></td>
			    <td class="buildDuration<%= entry_num %>"><%= suite.duration_converted %></td>
			    <td class="buildTag<%= entry_num %>"><%= suite.mobilizer_build_tag %></td>
			    <%= model_status_display(suite,entry_num) %>
			    <td><%= link_to 'Show', suite %></td>
			    <td><%= link_to 'Destroy', suite, confirm: 'Are you sure?', method: :delete %></td>
			  </tr>
			<% end %>
			</table>
		</div>
	<% end %>
</div>
<br />